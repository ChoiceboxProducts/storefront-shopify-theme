{% if settings.pause_sales == true %}
  <h1>{{ 'general.unavailable.heading' | t }}</h1>
  <p>{{ 'general.unavailable.message' | t }}</p>
{% else %}
  <style>
    .product-description {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: min-content 1fr;
      grid-template-areas: "photos heading"
                           "photos details";
      grid-gap: 1rem 3rem;
      color: var(--default-copy-color);
    }

    .product-header {
      grid-area: heading;
      border-bottom: 3px solid rgba(0, 0, 0, 0.1);
      margin-bottom: 0.8rem;
      font-size: 1.0625rem;
    }

    .product-header h1 {
      display: flex;
      white-space: pre;
      margin-top: 0;
      font-size: 1.93rem;
    }

    .product-description .item-count {
      opacity: 0.5;
    }

    .product-description .product-name {
      font-weight: 600;
    }

    .product-description .product-details {
      grid-area: details;
    }

    .product-description .product-photos {
      grid-area: photos;
    }

    .product-description .product-photos > img {
      width: 100%;
    }

    .product-description .product-items {
      list-style: none;
    }

    .product-price {
      color: var(--positive-accent-color);
      flex: 1;
      text-align: right;
    }

    .back-to-listings {
      --shift: -2rem;
      font-size: 1rem;
    }

    .back-to-listings:link,
    .back-to-listings:visited {
      color: var(--default-copy-color);
      font-weight: 600;
      opacity: 0.6;
      text-decoration: none;
      vertical-align: middle;
      line-height: 1.2;
      font-size: 1.0625rem;
      padding: 1rem;
      margin: -1rem 0 0 -1rem;
      display: inline-block;
      transition: opacity 100ms, transform 100ms, padding 100ms;
    }

    .back-to-listings:hover {
      opacity: 1;
      transform: translate(var(--shift), 0);
      padding-right: calc(1rem - var(--shift)); /* Prevent mouse pointer race condition */
    }

    .back-to-listings::before {
      content: url("data:image/svg+xml,%3Csvg width='25' height='21' viewBox='0 0 25 21' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2 10.5L23 10.5M10.1667 18.6667L2 10.5L10.1667 18.6667ZM2 10.5L10.1667 2.33333L2 10.5Z' stroke='%23223B60' stroke-width='2.88889' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E%0A");
      vertical-align: middle;
      margin-right: 0.5rem;
    }

    .product-options {
      margin-bottom: 1rem;
    }

    .product-option {
      display: inline-block;
      position: relative;
      padding: 0.5rem 1rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      font-size: 0.98rem;
    }

    .product-option input[type="radio"] {
      border: 3px solid #2B749E;
      border-radius: 4px;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      padding: 0;
      margin: 0;
      width: 100%;
      z-index: 1;
      cursor: pointer;
    }

    .product-option label {
      color: #2B749E;
      position: relative;
      z-index: 2;
      cursor: pointer;
    }

    .product-option input[type="radio"]:disabled {
      border-color: rgba(0, 0, 0, 0.4);
    }

    .product-option input[type="radio"]:checked {
      background-color: #fff;
    }

    .add-to-cart {
      display: block;
      margin-top: 1rem;
    }
  </style>

  <script>
    (function () {
      // Check to see if the user navigated to the product page from the
      // Choicebox product page(s) using `document.referrer`.

      // TODO: Dynamically update the 'back to product listing' link depending
      // on where the user came from. If the referrer contains:
      //  * From a Choicebox product listing page -> back to the correct page#
      //  * From another site -> back to the main Choicebox product listing page
      //  * Bookmark/direct -> back to the main Choicebix product listing page
    }());
  </script>

  <a href="/collections/all" class="back-to-listings">{{ "general.product.back_to_product_listings" | t }}</a>
  <div class="product-listing">
    <section id="product-description" class="product-description">
      <header class="product-header">
        <h1>{{ product.title }} <span class="product-price">{{ product.price |  money_without_trailing_zeros }}</span></h1>
        <p>{{ 'general.product.price_includes_statement' | t }}</p>
      </header>
      <section id="product-photos" class="product-photos">
        {% assign current_variant = product.selected_or_first_available_variant %}
        {% assign featured_image = current_variant.featured_image | default: product.featured_image %}
        <img class="product-photo" src="{{ featured_image | img_url: 'large' }}" alt="{{ featured_image.alt | escape }}" id="ProductPhotoImg">
        {% for image in product.images %}
          <a href="{{ image.src | img_url: 'large' }}">
            <img class="product-photo" src="{{ image.src | img_url: 'compact' }}" alt="{{ image.alt | escape }}">
          </a>
        {% endfor %}
      </section>
      <form action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm" class="product-details">

        {% if product.variants.size > 1 %}
          <div class="product-options">
            {% for variant in product.variants %}
              <div class="product-option">
                <input
                  type="radio"
                  id="{{ variant.id }}"
                  name="id"
                  value="{{ variant.id }}"
                  {% if variant.title == current_variant.title %}checked="checked"{% endif %} />
                <label for="{{ variant.id }}">{{ variant.title }}</label>
              </div>
            {% endfor %}
          </div>
        {% endif %}

        {% if product.description != "" %}
          {{ product.description | strip }}
        {% else %}
          {{ 'general.product.no_description_html' | t }}
        {% endif %}
        <button class="add-to-cart" type="submit" name="add" id="AddToCart">Add to cart</button>
      </form>
    </section>
    <section id="product-reviews"></section>
  </div>
{% endif %}